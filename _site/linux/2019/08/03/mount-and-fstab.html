<!DOCTYPE HTML>
<!--
	Future Imperfect by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
  <title>岁月无声</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--[if lte IE 8]><script src="js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" href="/css/main.css">
  <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
</head>

	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
<header id="header">
  <h1><a href="http://localhost:4000">岁月无声</a></h1>
	<nav class="links">
    <!--
    <ul>
      <li><a href="#">Lorem</a></li>
			<li><a href="#">Ipsum</a></li>
			<li><a href="#">Feugiat</a></li>
			<li><a href="#">Tempus</a></li>
			<li><a href="#">Adipiscing</a></li>
		</ul>
  -->
	</nav>
	<nav class="main">
    <ul>
                <!--
								<li class="search">
									<a class="fa-search" href="#search">Search</a>
									<form id="search" method="get" action="#">
										<input type="text" name="query" placeholder="Search" />
									</form>
								</li>
              -->
		  <li class="menu">
		  	<a class="fa-bars" href="#menu">Menu</a>
			</li>
		</ul>
	</nav>
</header>

<!-- Menu -->
<section id="menu">
  <!-- Search -->
  <!--
  <section>
	  <form class="search" method="get" action="#">
	    <input type="text" name="query" placeholder="Search" />
		</form>
	</section>
  -->
	<!-- Links -->
	<section>
	  <ul class="links">
	    <li>
		    <a href="/acknowledgement">
				  <h3>Acknowledgement</h3>
				  <p>Acknowledgement</p>
				</a>
			</li>
    </ul>
	</section>
	<!-- Actions -->
  <!--
  <section>
	  <ul class="actions vertical">
	    <li><a href="#" class="button big fit">Log In</a></li>
    </ul>
  </section>
  -->
</section>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
            <article class="post">
              <header>
                <div class="title">
                  <h2><a href="/linux/2019/08/03/mount-and-fstab.html">mount命令及/etc/fstab文件详解</a></h2>
                <!-- <p>Lorem ipsum dolor amet nullam consequat etiam feugiat</p> -->
                </div>
                <div class="meta">
                  <time class="published" datetime="2019-08-03">August 03, 2019</time>
                  
                    <a href="#">linux</a>
                  

        <!--
        <a href="#" class="author"><span class="name">Jane Doe</span><img src="images/avatar.jpg" alt="" /></a>
        -->
                </div>
              </header>
              
                <a href="/linux/2019/08/03/mount-and-fstab.html" class="image featured"><img src="/images/pic03.jpg" alt="" /></a>
              
              <p>一、手动挂载设备</p>

<p>mount 挂载命令</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">格式：

mount <span class="o">[</span>options] <span class="o">[</span><span class="nt">-t</span> fstype] <span class="o">[</span><span class="nt">-o</span> option] 设备 挂载点
常用选项 <span class="o">[</span> options <span class="o">]</span>：

常用选项：
     <span class="nt">-t</span> fstype<span class="o">(</span>ext2、ext3、ext4、xfs、iso9660、smb等<span class="o">)</span>
     <span class="nt">-r</span>: 只读挂载
     <span class="nt">-w</span>: 读写
     <span class="nt">-L</span> lable: 以卷标指定， <span class="nv">LABLE</span><span class="o">=</span>“label”
     <span class="nt">-U</span> UUID：以UUID指定挂载设备，UUID<span class="o">=</span>“UUID”
     <span class="nt">-a</span>: 自动挂载所有（/etc/fstab文件中）支持自动挂载的设备
     <span class="nt">--bind</span> Dir1 Dir2 己经挂载了的文件，可以再次绑定其它目录上使用
     <span class="nt">-n</span>: 不更新/etc/mtab文件
     
<span class="nt">-o</span> options
        async: 异步I/O
        <span class="nb">sync</span>: 同步I/O
        noatime/atime: 建议noatime
        auto/noauto: 是否能够被mount <span class="nt">-a</span>选项自动挂载；
        diratime/nodiratime: 是否更新目录的访问时间戳；
        <span class="nb">exec</span>/noexec：是否允许执行其中的二进制程序；
        _netdev: 网络设备
        remount: 重新挂载
        acl: 启用facl

            <span class="c"># tune2fs -o mount-option 设备</span>
            <span class="c"># tune2fs -o ^mount-option 取消</span></code></pre></figure>

<p>示例：</p>

<p>（1）挂载,默认不指定选项会自动附加如下属性</p>

<p>defaults(use default options: rw, suid, dev, exec, auto, nouser, and async)
eg.
root@T430:~#  mount /dev/sda5 /mnt/sda5</p>

<p>（2）查看挂载情况 
查看当前已经挂载的情况有多种方式， “mount -s”,”cat /etc/mtab”等</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">➜  ~ mount <span class="nt">-s</span>
sysfs on /sys <span class="nb">type </span>sysfs <span class="o">(</span>rw,nosuid,nodev,noexec,relatime<span class="o">)</span>
proc on /proc <span class="nb">type </span>proc <span class="o">(</span>rw,nosuid,nodev,noexec,relatime<span class="o">)</span>
udev on /dev <span class="nb">type </span>devtmpfs <span class="o">(</span>rw,nosuid,relatime,size<span class="o">=</span>8035072k,nr_inodes<span class="o">=</span>2008768,mode<span class="o">=</span>755<span class="o">)</span>
devpts on /dev/pts <span class="nb">type </span>devpts <span class="o">(</span>rw,nosuid,noexec,relatime,gid<span class="o">=</span>5,mode<span class="o">=</span>620,ptmxmode<span class="o">=</span>000<span class="o">)</span>
tmpfs on /run <span class="nb">type </span>tmpfs <span class="o">(</span>rw,nosuid,noexec,relatime,size<span class="o">=</span>1611540k,mode<span class="o">=</span>755<span class="o">)</span>
/dev/sdb3 on / <span class="nb">type </span>ext4 <span class="o">(</span>rw,relatime,errors<span class="o">=</span>remount-ro<span class="o">)</span></code></pre></figure>

<p>二、查看占用挂载设备的进程
     fuser -v  挂载点
     fuser -km 挂载点
当卸载一个文件系统时，如果出现如下信息，表示该设备有人正在使用。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">root@T430:~#  umount /dev/sda5
umount: /mnt/sda5: device is busy.
        <span class="o">(</span>In some cases useful info about processes that use
         the device is found by lsof<span class="o">(</span>8<span class="o">)</span> or fuser<span class="o">(</span>1<span class="o">))</span>
先查看

root@T430:~#  fuser <span class="nt">-c</span> /mnt/sda5
/mnt/sda5:           13796c
root@T430:~#  fuser <span class="nt">-c</span> /mnt/sda5/find/
/mnt/sda5/find/:     13796c
杀死正在使用该文件系统的用户，然后才能进行卸载

root@T430:~#  fuser <span class="nt">-km</span> /mnt/sda5
/mnt/sda5:           13796c</code></pre></figure>

<p>四、挂载配置文件/etc/fstab</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">root@T430:~#  <span class="nb">cat</span> /etc/fstab
<span class="c">#</span>
<span class="c"># /etc/fstab</span>
<span class="c"># Created by anaconda on Fri Jul 31 23:50:21 2015</span>
<span class="c">#</span>
<span class="c"># Accessible filesystems, by reference, are maintained under '/dev/disk'</span>
<span class="c"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span>
<span class="c">#</span>
/dev/mapper/vg_system-root /                       ext4    defaults        1 1
<span class="nv">UUID</span><span class="o">=</span>3a9c20f4-0cc2-4563-9e2c-d4833c1463c2 /boot                   ext4    defaults        1 2
/dev/mapper/vg_system-var /var                    ext4    defaults        1 2
/dev/mapper/vg_system-swap swap                    swap    defaults        0 0
tmpfs                   /dev/shm                tmpfs   defaults        0 0
devpts                  /dev/pts                devpts  <span class="nv">gid</span><span class="o">=</span>5,mode<span class="o">=</span>620  0 0
sysfs                   /sys                    sysfs   defaults        0 0
proc                    /proc                   proc    defaults        0 0

该文件分为六段各段的意义如下：
 设备     挂载点   文件系统类型  挂载选项   转储频度   自检次序
（1）要挂载的设备：
        设备文件、LABEL<span class="o">=</span>, <span class="nv">UUID</span><span class="o">=</span>
（2）挂载点：
        swap没有挂载点，挂载点为swap
（3）文件系统类型
        ext2、ext3、ext4、xfs、nfs、smb、iso9660等
（4）挂载选项：多个选项间使用逗号分隔<span class="p">;</span>
        async、sync、_netdev
        defaults（ rw,  suid, dev, <span class="nb">exec</span>, auto, nouser, async, and relatime.）
（5）转储频率：
         0：从不备份
         1：每日备份
         2：每隔一天备份
（6）自检次序：
         0: 不自检
         1：首先自检，通常只能被/使用；
         2：等数字为1的自检完成后，再进行自检</code></pre></figure>

<p>注意：配置完该文件不会立即生效，可以重启操作系统或使用mount -a来使该文件立即生效。</p>

              <footer>
                <ul class="stats">
                
                  <li><a href="#">mount</a></li>
                
                  <li><a href="#">fstab</a></li>
                
                  <li><a href="#">umount</a></li>
                
        <!--
        <li><a href="#">General</a></li>
        <li><a href="#" class="icon fa-heart">28</a></li>
        <li><a href="#" class="icon fa-comment">128</a></li>
        -->
                </ul>
              </footer>
           </article>
  					<ul class="actions pagination">
  					  
  	  				  <li><a href="/linux/2019/08/03/keep-ssh-alive.html" class="button big previous">Previous Post</a></li>
  						
							
  						  <li><a href="#" class="disabled button big next">Next Post</a></li>
  						
  					</ul>
					</div>

				<!-- Sidebar -->
					<section id="sidebar">

						<!-- Intro -->
						<section id="intro">
  <a href="http://localhost:4000" class="logo"><img src="/images/logo.jpg" alt="" /></a>
	<header>
    <h2>岁月无声</h2>
		<p>超喜欢LG ultrafine 4K ^_^</p>
	</header>
</section>


						<!-- Mini Posts -->
						<section>
  <div class="mini-posts">
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/linux/2019/08/03/mount-and-fstab.html">mount命令及/etc/fstab文件详解</a></h3>
		      <time class="published" datetime="2019-08-03">August 03, 2019</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/linux/2019/08/03/mount-and-fstab.html" class="image"><img src="/images/pic03.jpg" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/linux/2019/08/03/keep-ssh-alive.html">如何设置高效的ssh!</a></h3>
		      <time class="published" datetime="2019-08-03">August 03, 2019</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/linux/2019/08/03/keep-ssh-alive.html" class="image"><img src="/images/pic02.jpg" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/linux/git/2019/08/03/how-to-different-key-for-git.html">怎么样为git设置多个key</a></h3>
		      <time class="published" datetime="2019-08-03">August 03, 2019</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/linux/git/2019/08/03/how-to-different-key-for-git.html" class="image"><img src="/images/pic01.jpg" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/jekyll/update/2015/11/15/welcome-to-jekyll2.html">Welcome to Jekyll!</a></h3>
		      <time class="published" datetime="2015-11-15">November 15, 2015</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/jekyll/update/2015/11/15/welcome-to-jekyll2.html" class="image"><img src="/images/pic03.jpg" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
  </div>
</section>


						<!-- Posts List -->

						<!-- About -->
					  <section class="blurb">
  <h2>About</h2>
	<p>闲来无来,偶然记录点东西
</p>
	<ul class="actions">
	  <li><a href="/about" class="button">Learn More</a></li>
	</ul>
</section>


						<!-- Footer -->
						<section id="footer">
  <ul class="icons">
  	<li><a href="https://twitter.com/unknown" class="fa-twitter"><span class="label">Twitter</span></a></li>
		<li><a href="https://github.com/mqeefqfn" class="fa-github"><span class="label">GitHub</span></a></li>
		<li><a href="/feed.xml" class="fa-rss"><span class="label">RSS</span></a></li>
		<li><a href="mailto:" class="fa-envelope"><span class="label">Email</span></a></li>
	</ul>
  <p class="copyright">Copyright &copy; 2015 mqeefqfn</p>
</section>

					</section>
			</div>
		<!-- Scripts -->
		<script src="/js/jquery.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
<script src="/js/main.js"></script>

	</body>
</html>
